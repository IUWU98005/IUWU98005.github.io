<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Python åŸºç¡€ï¼ˆ9.7æ›´æ–°ï¼‰ | My Blog</title><meta name=keywords content><meta name=description content="Python builtin
@classmethod å’Œ @staticmethod
@classmethod å’Œ @staticmethod æ˜¯ Python è‡ªå¸¦(builtin) çš„ä¸¤ä¸ªè£…é¥°å™¨
classmethod å’Œ staticmethod éƒ½å¯ä»¥é€šè¿‡ object è°ƒç”¨å’Œ class è°ƒç”¨ï¼Œ ä¹Ÿå°±æ˜¯:

é€šè¿‡å¯¹è±¡è°ƒç”¨ï¼ŒA().f(1)
é€šè¿‡ç±»è°ƒç”¨ï¼ŒA.f(1)

@staticmethod
staticmethod å°±æ˜¯æ™®é€šå‡½æ•°æ”¾åˆ° Class çš„å‘½åç©ºé—´ä¸‹ï¼Œä½†ä¸ç”¨ä¼ å…¥ self å‚æ•°ã€‚

æä¾›æ›´å¥½çš„å°è£…ï¼Œå°†åŠŸèƒ½ç»‘å®šåœ¨ç±»ä¸Šï¼Œè€Œä¸æ˜¯ä»…ä»…æ˜¯åœ¨ç±»çš„å¯¹è±¡ä¸Šã€‚

@classmethod
å¯¹æ¯”æ™®é€šç±»ä¸­çš„æ–¹æ³•ï¼Œclassmethod çš„ç¬¬ä¸€ä¸ª arg ä¸º clsï¼Œè€Œä¸æ˜¯ selfã€‚
class Person1:

    ...

    @staticmethod
    def create(name, birth_year):
        curr_year = datatime.now().year
        age = curr_year - birth_year
        return Person1(name, age)

class Person2:

    ...

    @classmethod
    def create(cls, name, birth_year):
        curr_year = datatime.now().year
        age = curr_year - birth_year
        return cls(name, age)

class Child1(Person1):

    def __init__(self, name, age, department):
        super().__init__(name, age)

class Child2(Person2):

    def __init__(self, name, age, department):
        super().__init__(name, age)
ä»¥ä¸Šä¸¤æ®µä»£ç çš„åŠŸèƒ½åŸºæœ¬ç›¸åŒï¼Œç¬¬äºŒæ®µä»£ç ä¸­çš„ cls å¯ä»¥ä»£è¡¨ Person2 è‡ªå·±ã€‚"><meta name=author content><link rel=canonical href=https://iuwu98005.github.io/posts/250902-python-base/><link crossorigin=anonymous href=/assets/css/stylesheet.css rel="preload stylesheet" as=style><link rel=icon href=https://iuwu98005.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://iuwu98005.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://iuwu98005.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://iuwu98005.github.io/apple-touch-icon.png><link rel=mask-icon href=https://iuwu98005.github.io/safari-pinned-tab.svg><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#ffffff"><link rel=alternate hreflang=en href=https://iuwu98005.github.io/posts/250902-python-base/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://iuwu98005.github.io/posts/250902-python-base/"><meta property="og:site_name" content="My Blog"><meta property="og:title" content="Python åŸºç¡€ï¼ˆ9.7æ›´æ–°ï¼‰"><meta property="og:description" content="Python builtin @classmethod å’Œ @staticmethod @classmethod å’Œ @staticmethod æ˜¯ Python è‡ªå¸¦(builtin) çš„ä¸¤ä¸ªè£…é¥°å™¨
classmethod å’Œ staticmethod éƒ½å¯ä»¥é€šè¿‡ object è°ƒç”¨å’Œ class è°ƒç”¨ï¼Œ ä¹Ÿå°±æ˜¯:
é€šè¿‡å¯¹è±¡è°ƒç”¨ï¼ŒA().f(1) é€šè¿‡ç±»è°ƒç”¨ï¼ŒA.f(1) @staticmethod staticmethod å°±æ˜¯æ™®é€šå‡½æ•°æ”¾åˆ° Class çš„å‘½åç©ºé—´ä¸‹ï¼Œä½†ä¸ç”¨ä¼ å…¥ self å‚æ•°ã€‚
æä¾›æ›´å¥½çš„å°è£…ï¼Œå°†åŠŸèƒ½ç»‘å®šåœ¨ç±»ä¸Šï¼Œè€Œä¸æ˜¯ä»…ä»…æ˜¯åœ¨ç±»çš„å¯¹è±¡ä¸Šã€‚ @classmethod å¯¹æ¯”æ™®é€šç±»ä¸­çš„æ–¹æ³•ï¼Œclassmethod çš„ç¬¬ä¸€ä¸ª arg ä¸º clsï¼Œè€Œä¸æ˜¯ selfã€‚
class Person1: ... @staticmethod def create(name, birth_year): curr_year = datatime.now().year age = curr_year - birth_year return Person1(name, age) class Person2: ... @classmethod def create(cls, name, birth_year): curr_year = datatime.now().year age = curr_year - birth_year return cls(name, age) class Child1(Person1): def __init__(self, name, age, department): super().__init__(name, age) class Child2(Person2): def __init__(self, name, age, department): super().__init__(name, age) ä»¥ä¸Šä¸¤æ®µä»£ç çš„åŠŸèƒ½åŸºæœ¬ç›¸åŒï¼Œç¬¬äºŒæ®µä»£ç ä¸­çš„ cls å¯ä»¥ä»£è¡¨ Person2 è‡ªå·±ã€‚"><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-09-02T06:57:02+08:00"><meta property="article:modified_time" content="2025-09-02T06:57:02+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Python åŸºç¡€ï¼ˆ9.7æ›´æ–°ï¼‰"><meta name=twitter:description content="Python builtin
@classmethod å’Œ @staticmethod
@classmethod å’Œ @staticmethod æ˜¯ Python è‡ªå¸¦(builtin) çš„ä¸¤ä¸ªè£…é¥°å™¨
classmethod å’Œ staticmethod éƒ½å¯ä»¥é€šè¿‡ object è°ƒç”¨å’Œ class è°ƒç”¨ï¼Œ ä¹Ÿå°±æ˜¯:

é€šè¿‡å¯¹è±¡è°ƒç”¨ï¼ŒA().f(1)
é€šè¿‡ç±»è°ƒç”¨ï¼ŒA.f(1)

@staticmethod
staticmethod å°±æ˜¯æ™®é€šå‡½æ•°æ”¾åˆ° Class çš„å‘½åç©ºé—´ä¸‹ï¼Œä½†ä¸ç”¨ä¼ å…¥ self å‚æ•°ã€‚

æä¾›æ›´å¥½çš„å°è£…ï¼Œå°†åŠŸèƒ½ç»‘å®šåœ¨ç±»ä¸Šï¼Œè€Œä¸æ˜¯ä»…ä»…æ˜¯åœ¨ç±»çš„å¯¹è±¡ä¸Šã€‚

@classmethod
å¯¹æ¯”æ™®é€šç±»ä¸­çš„æ–¹æ³•ï¼Œclassmethod çš„ç¬¬ä¸€ä¸ª arg ä¸º clsï¼Œè€Œä¸æ˜¯ selfã€‚
class Person1:

    ...

    @staticmethod
    def create(name, birth_year):
        curr_year = datatime.now().year
        age = curr_year - birth_year
        return Person1(name, age)

class Person2:

    ...

    @classmethod
    def create(cls, name, birth_year):
        curr_year = datatime.now().year
        age = curr_year - birth_year
        return cls(name, age)

class Child1(Person1):

    def __init__(self, name, age, department):
        super().__init__(name, age)

class Child2(Person2):

    def __init__(self, name, age, department):
        super().__init__(name, age)
ä»¥ä¸Šä¸¤æ®µä»£ç çš„åŠŸèƒ½åŸºæœ¬ç›¸åŒï¼Œç¬¬äºŒæ®µä»£ç ä¸­çš„ cls å¯ä»¥ä»£è¡¨ Person2 è‡ªå·±ã€‚"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://iuwu98005.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Python åŸºç¡€ï¼ˆ9.7æ›´æ–°ï¼‰","item":"https://iuwu98005.github.io/posts/250902-python-base/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Python åŸºç¡€ï¼ˆ9.7æ›´æ–°ï¼‰","name":"Python åŸºç¡€ï¼ˆ9.7æ›´æ–°ï¼‰","description":"Python builtin @classmethod å’Œ @staticmethod @classmethod å’Œ @staticmethod æ˜¯ Python è‡ªå¸¦(builtin) çš„ä¸¤ä¸ªè£…é¥°å™¨\nclassmethod å’Œ staticmethod éƒ½å¯ä»¥é€šè¿‡ object è°ƒç”¨å’Œ class è°ƒç”¨ï¼Œ ä¹Ÿå°±æ˜¯:\né€šè¿‡å¯¹è±¡è°ƒç”¨ï¼ŒA().f(1) é€šè¿‡ç±»è°ƒç”¨ï¼ŒA.f(1) @staticmethod staticmethod å°±æ˜¯æ™®é€šå‡½æ•°æ”¾åˆ° Class çš„å‘½åç©ºé—´ä¸‹ï¼Œä½†ä¸ç”¨ä¼ å…¥ self å‚æ•°ã€‚\næä¾›æ›´å¥½çš„å°è£…ï¼Œå°†åŠŸèƒ½ç»‘å®šåœ¨ç±»ä¸Šï¼Œè€Œä¸æ˜¯ä»…ä»…æ˜¯åœ¨ç±»çš„å¯¹è±¡ä¸Šã€‚ @classmethod å¯¹æ¯”æ™®é€šç±»ä¸­çš„æ–¹æ³•ï¼Œclassmethod çš„ç¬¬ä¸€ä¸ª arg ä¸º clsï¼Œè€Œä¸æ˜¯ selfã€‚\nclass Person1: ... @staticmethod def create(name, birth_year): curr_year = datatime.now().year age = curr_year - birth_year return Person1(name, age) class Person2: ... @classmethod def create(cls, name, birth_year): curr_year = datatime.now().year age = curr_year - birth_year return cls(name, age) class Child1(Person1): def __init__(self, name, age, department): super().__init__(name, age) class Child2(Person2): def __init__(self, name, age, department): super().__init__(name, age) ä»¥ä¸Šä¸¤æ®µä»£ç çš„åŠŸèƒ½åŸºæœ¬ç›¸åŒï¼Œç¬¬äºŒæ®µä»£ç ä¸­çš„ cls å¯ä»¥ä»£è¡¨ Person2 è‡ªå·±ã€‚\n","keywords":[],"articleBody":"Python builtin @classmethod å’Œ @staticmethod @classmethod å’Œ @staticmethod æ˜¯ Python è‡ªå¸¦(builtin) çš„ä¸¤ä¸ªè£…é¥°å™¨\nclassmethod å’Œ staticmethod éƒ½å¯ä»¥é€šè¿‡ object è°ƒç”¨å’Œ class è°ƒç”¨ï¼Œ ä¹Ÿå°±æ˜¯:\né€šè¿‡å¯¹è±¡è°ƒç”¨ï¼ŒA().f(1) é€šè¿‡ç±»è°ƒç”¨ï¼ŒA.f(1) @staticmethod staticmethod å°±æ˜¯æ™®é€šå‡½æ•°æ”¾åˆ° Class çš„å‘½åç©ºé—´ä¸‹ï¼Œä½†ä¸ç”¨ä¼ å…¥ self å‚æ•°ã€‚\næä¾›æ›´å¥½çš„å°è£…ï¼Œå°†åŠŸèƒ½ç»‘å®šåœ¨ç±»ä¸Šï¼Œè€Œä¸æ˜¯ä»…ä»…æ˜¯åœ¨ç±»çš„å¯¹è±¡ä¸Šã€‚ @classmethod å¯¹æ¯”æ™®é€šç±»ä¸­çš„æ–¹æ³•ï¼Œclassmethod çš„ç¬¬ä¸€ä¸ª arg ä¸º clsï¼Œè€Œä¸æ˜¯ selfã€‚\nclass Person1: ... @staticmethod def create(name, birth_year): curr_year = datatime.now().year age = curr_year - birth_year return Person1(name, age) class Person2: ... @classmethod def create(cls, name, birth_year): curr_year = datatime.now().year age = curr_year - birth_year return cls(name, age) class Child1(Person1): def __init__(self, name, age, department): super().__init__(name, age) class Child2(Person2): def __init__(self, name, age, department): super().__init__(name, age) ä»¥ä¸Šä¸¤æ®µä»£ç çš„åŠŸèƒ½åŸºæœ¬ç›¸åŒï¼Œç¬¬äºŒæ®µä»£ç ä¸­çš„ cls å¯ä»¥ä»£è¡¨ Person2 è‡ªå·±ã€‚\nä¸¤è€…çš„åŒºåˆ« è¢« @classmethod ä¿®é¥°çš„æ–¹æ³•ï¼Œè¿”å› cls å¯¹è±¡ï¼Œå­ç±»åœ¨è°ƒç”¨æ—¶ï¼Œè¿”å›çš„æ˜¯å­ç±»è‡ªèº«ï¼ˆä¾‹å­ä¸­ä¸º Child2ï¼‰ï¼›è€Œ @staticmethod ä¿®é¥°çš„æ–¹æ³•ï¼Œå­ç±»åœ¨è°ƒç”¨æ—¶ï¼Œè¿”å›çš„å°±æ˜¯é™æ€çš„ç±»å‹ï¼ˆä¾‹å­ä¸­ä¸º Person1ï¼‰ Python çº¿ç¨‹æ± (ThreadPoolExecutor) ThreadPoolExecutor ä¸ Thread çš„åŒºåˆ« Thread åœ¨å¼€å§‹çº¿ç¨‹å’Œç»“æŸçº¿ç¨‹æ—¶ï¼Œä¼šåˆ›å»ºå’Œé”€æ¯çº¿ç¨‹ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¼šè€—è´¹å¤§é‡çš„æ—¶é—´ï¼›ThreadPool åˆ™çœå»äº†è¿™ä¸¤ä¸ªæ­¥éª¤ï¼Œç›´æ¥ä½¿ç”¨åŸæ¥çš„çº¿ç¨‹ã€‚ ThreadPoolExecutor ä¸ ProcessPoolExecutor ThreadPoolExecutor é€‚åˆå¤„ç† I/0 å¯†é›†å‹æ“ä½œï¼ŒProcessPoolExecutor é€‚åˆå¤„ç† CPU å¯†é›†å‹æ“ä½œï¼ˆéœ€è¦å¤§é‡è®¡ç®—ï¼‰\nåŸºæœ¬ç”¨æ³• ThreadPoolExecutor ä¸º Python å®˜æ–¹å°è£…çš„ Threading åº“ï¼Œé€šè¿‡ from concurrent.futures import ThreadPoolExecutor å¯¼å…¥ã€‚\næ–°å»ºçº¿ç¨‹æ±  from concurrent.futures import ThreadPoolExecutor import time def waste_time(n: int) -\u003e None: print(f\"{n} started...\") time.sleep(n) print(f\"{n} ended...\") t = ThreadPoolExecutor(max_workers=10) for i in range(10): t.submit(waste_time, i) print(\"end\") max_workers: å…è®¸æœ€å¤šæœ‰å‡ ä¸ªçº¿ç¨‹è¿è¡Œï¼Œé»˜è®¤ä¸º cpu æœ€å¤§è¿è¡Œæ ¸å¿ƒæ•°*5ï¼ˆe.g. 8æ ¸cpuï¼Œæ­¤æ—¶ max_workers é»˜è®¤ä¸º 40ï¼‰ submit(func, args): args ä¸º func çš„å‚æ•° è¿™æ®µä»£ç å¯èƒ½å…ˆæ‰“å° endï¼Œä¹‹åå†æ‰“å° â€œ{n} startedâ€ å’Œ â€œ{n} endedâ€ï¼Œè¿™æ˜¯å› ä¸ºç¨‹åºæ˜¯éé˜»å¡çš„ã€‚ç¨‹åºè¿è¡Œåˆ° t.submit æ—¶ï¼Œç¨‹åºç»§ç»­è¿è¡Œ t.submit çš„é€»è¾‘ï¼Œå‰©ä½™çš„ä»£ç åˆ™äº¤ç»™äº†å¦ä¸€ä¸ªçº¿ç¨‹ç»§ç»­æ‰§è¡Œã€‚\nshutdown çš„ç”¨æ³• ç”±äºçº¿ç¨‹æ± æ˜¯éé˜»å¡çš„ï¼Œå¦‚æœè¦æ§åˆ¶çº¿ç¨‹çš„æ‰§è¡Œé¡ºåºï¼Œå¯ä»¥ä½¿ç”¨ shutdown() æ¥æ§åˆ¶çº¿ç¨‹çš„é˜»å¡ã€‚\næ¯”å¦‚åœ¨ä¸Šè¿°ä»£ç  print(â€œendâ€) ä¸Šé¢ä¸€è¡ŒåŠ å…¥ t.shutdown()ï¼Œæ­¤æ—¶ end å°±ä¼šç­‰å¾…æ‰€æœ‰çº¿ç¨‹éƒ½æ‰§è¡Œå®Œæˆåæ‰è¿›è¡Œæ‰“å°ã€‚\né”€æ¯çº¿ç¨‹ å¯ä»¥å°† shutdown æ–¹æ³•çš„å‚æ•° cancel_future è®¾ç½®ä¸º Trueï¼Œæ¥è¿›è¡Œçº¿ç¨‹çš„é”€æ¯ã€‚\nwith å…³é”®è¯ with ThreadPoolExecutor(max_workers=10) as t: for i in range(10): t.submit(waste_time, i) other code... ä½¿ç”¨ with å…³é”®è¯æœ‰ä»¥ä¸‹ä¸¤ä¸ªä½œç”¨ï¼š\nçº¿ç¨‹è¿è¡Œç»“æŸåï¼Œé”€æ¯çº¿ç¨‹ é˜»å¡ç¨‹åºï¼Œç­‰å¾…æ‰€æœ‰çº¿ç¨‹æ‰§è¡Œå®Œæˆåï¼Œæ‰è¿è¡Œä¸‹é¢çš„ä»£ç  è·å–è¿”å›å€¼ é€šè¿‡æ–°å»ºåˆ—è¡¨ threadsï¼Œå¹¶å°†çº¿ç¨‹æ·»åŠ åˆ°åˆ—è¡¨ä¸­ï¼Œè°ƒç”¨åˆ—è¡¨ä¸­å…ƒç´ çš„ result() æ–¹æ³•å°±å¯ä»¥è·å–åˆ°æ–¹æ³•çš„è¿”å›å€¼ã€‚\nfrom concurrent.futures import ThreadPoolExecutor, as_completed import time def waste_time(n: int) -\u003e int: print(f\"{n} started...\") time.sleep(n) print(f\"{n} ended...\") return n threads = [] with ThreadPoolExecutor(max_workers=10) as t: for i in range(10): # t.submit(waste_time, i) threads.append(t.submit(waste_time, i)) for thread in as_completed(threads): # æ‰“å°ç»“æœ print(thread.result()) print(\"end\") ä»»ä½•åœ¨ as_completed() è¢«è°ƒç”¨ä¹‹å‰å®Œæˆçš„ future å¯¹è±¡å°†ä¼šä¼˜å…ˆè¢«ç”Ÿæˆã€‚è¿™æ®µä»£ç ä¸­ä¼šä¼˜å…ˆæ‰“å°å·²ç»è¿è¡Œç»“æŸçš„çº¿ç¨‹çš„ç»“æœï¼ˆå¯èƒ½ä¸æ˜¯æŒ‰ç…§1-10çš„é¡ºåºæ‰“å°ï¼‰ã€‚\nè¶…æ—¶(timeout) é€šè¿‡ timeout å‚æ•°è®¾ç½®è¶…æ—¶ï¼Œçœå»æ‰‹åŠ¨ try-catch çš„è¿‡ç¨‹\nwith ThreadPoolExecutor(max_workers=10) as t: for i in range(10): # t.submit(waste_time, i) threads.append(t.submit(waste_time, i)) for thread in as_completed(threads, timeout=5): # æ‰“å°ç»“æœ print(thread.result(timeout=5)) ç­‰å¾…(wait) from concurrent.futures import ThreadPoolExecutor, as_completed, wait, ALL_COMPLETED, FIRST_COMPLETED import time def waste_time(n: int) -\u003e int: print(f\"{n} started...\") time.sleep(n) print(f\"{n} ended...\") return n threads = [] t = ThreadPoolExecutor(max_workers=10) for i in range(10): threads.append(t.submit(waste_time, i)) # å½“æ‰€æœ‰çº¿ç¨‹è¿è¡Œå®Œæ¯•åï¼Œæ‰è¿›è¡Œè¿”å› wait(threads, timeout=10, return_when=ALL_COMPLETED) print(\"end\") ALL_COMPLETED: ç­‰å¾…æ‰€æœ‰çº¿ç¨‹æ‰§è¡Œå®Œæ¯•åï¼Œè¿è¡Œä¸‹ä¸€è¡Œä»£ç  FIRST_COMPLETED: ç¬¬ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œå®Œæ¯•åï¼Œè¿è¡Œä¸‹ä¸€è¡Œä»£ç \nè¿™æ®µä»£ç é™¤äº† print æ‰“å°çš„å†…å®¹ï¼Œè¿˜æ‰“å°äº† DoneAndNotDoneFutures å¯¹è±¡ï¼ˆåŒ…æ‹¬å·²ç»å®Œæˆçš„çº¿ç¨‹(done)å’Œæœªå®Œæˆçš„çº¿ç¨‹(not_done)ï¼‰\nè¿™ä¸ªç‰¹æ€§é€‚åˆåšæŠ¢ç¥¨çš„åŠŸèƒ½ï¼Œå³ç¬¬ä¸€ä¸ªäººæŠ¢åˆ°ç¥¨åï¼Œç›´æ¥ç»“æŸåé¢çš„çº¿ç¨‹ï¼š\nfrom concurrent.futures import ThreadPoolExecutor, as_completed, wait, ALL_COMPLETED, FIRST_COMPLETED import time def waste_time(n: int) -\u003e int: print(f\"{n} started...\") time.sleep(n) print(f\"{n} ended...\") return n threads = [] t = ThreadPoolExecutor(max_workers=10) for i in range(10): threads.append(t.submit(waste_time, i)) wait(threads, timeout=10, return_when=FIRST_COMPLETED) t.shutdown() print(\"end\") shutdown å’Œ wait çš„åŒºåˆ« shutdown(wait=True)\nä½œç”¨ï¼šå‘Šè¯‰çº¿ç¨‹æ± â€œä¸å†æ¥å—æ–°çš„ä»»åŠ¡â€ï¼Œç„¶åæ ¹æ® wait å‚æ•°å†³å®šæ˜¯å¦é˜»å¡ã€‚\nshutdown(wait=True)ï¼ˆé»˜è®¤å€¼ï¼‰ï¼š ä¼šé˜»å¡ï¼Œç›´åˆ°å·²ç»æäº¤çš„ä»»åŠ¡éƒ½æ‰§è¡Œå®Œæ¯•ï¼Œçº¿ç¨‹æ± ä¸­çš„å·¥ä½œçº¿ç¨‹é€€å‡ºï¼Œå†ç»§ç»­æ‰§è¡Œåç»­ä»£ç ã€‚\nshutdown(wait=False)ï¼š ä¸é˜»å¡ï¼Œç›´æ¥è¿”å›ã€‚çº¿ç¨‹æ± ä¼šåœ¨åå°ç»§ç»­è·‘å·²æäº¤çš„ä»»åŠ¡ï¼Œä½†ä¸»çº¿ç¨‹ä¸ä¼šç­‰å®ƒã€‚\n! shutdown()ä¸€æ—¦è°ƒç”¨ï¼Œçº¿ç¨‹æ± å°±ä¸èƒ½å† submit() æ–°ä»»åŠ¡äº†ã€‚\nconcurrent.futures.wait(fs, return_when=ALL_COMPLETED)\nä½œç”¨ï¼šç­‰å¾…ä¸€ç»„ Future å¯¹è±¡ å®Œæˆï¼Œä¸ä¼šå…³é—­çº¿ç¨‹æ± ã€‚\nç”¨äºä½ æ‰‹é‡Œæœ‰ä¸€æ‰¹ future = executor.submit(func, ...) å¾—åˆ°çš„ Futureï¼Œç„¶å wait(futures) å°±ä¼šé˜»å¡ç›´åˆ°å®ƒä»¬å®Œæˆã€‚\nwait() åªå…³å¿ƒè¿™äº› ä»»åŠ¡ï¼Œè·Ÿçº¿ç¨‹æ± çš„ç”Ÿå‘½å‘¨æœŸæ— å…³ï¼›æ± å­æœ¬èº«è¿˜èƒ½ç»§ç»­æ¥å—æ–°ä»»åŠ¡ã€‚\nğŸ”¹ shutdown(wait=True) çš„ç‰¹ç‚¹ å…³é—­çº¿ç¨‹æ± ï¼Œçº¿ç¨‹èµ„æºé‡Šæ”¾ï¼Œä¸èƒ½å†æäº¤ä»»åŠ¡ã€‚\nå¦‚æœä½ æœ‰å¤šç»„ä»»åŠ¡ï¼Œæ¯æ¬¡éƒ½ shutdown â†’ æ–°å»º ThreadPoolExecutorï¼Œä¼šé¢‘ç¹åˆ›å»º/é”€æ¯çº¿ç¨‹ï¼Œå¸¦æ¥æ€§èƒ½å¼€é”€ã€‚\næ›´é€‚åˆâ€œæ•´ä¸ªä»»åŠ¡æµéƒ½ç»“æŸâ€æ—¶è°ƒç”¨ã€‚\nğŸ”¹ wait() çš„ç‰¹ç‚¹ åªç­‰å¾…ä¸€ç»„ä»»åŠ¡å®Œæˆï¼Œçº¿ç¨‹æ± æœ¬èº«è¿˜æ´»ç€ï¼Œå¯ä»¥ç»§ç»­æäº¤ã€‚\né¿å…äº†åå¤åˆ›å»ºå’Œé”€æ¯çº¿ç¨‹æ± çš„æˆæœ¬ï¼Œçº¿ç¨‹å¯å¤ç”¨ã€‚\næ•°æ®ç»“æ„ä¸ç®—æ³• æ•°ç»„å»é‡ ä½¿ç”¨ set(), é¡ºåºå¯èƒ½ä¼šè¢«æ‰“ä¹±\narr = [1, 2, 3, 4, 5, 5] res = list(set(arr)) print(res) ä½¿ç”¨ dict(), å¯ä»¥ä¿æŒåŸæ¥çš„é¡ºåº\narr = [1, 2, 3, 4, 5, 5] res = list(dict.fromkeys(arr)) print(res) å¸¸è§ç¬¬ä¸‰æ–¹åº“ Selenium åŸºæœ¬ä½¿ç”¨ from selenium import webdriver driver.webdriver.Chrome() driver.get(\"www.baidu.com\") driver.quit() Selenium å¦‚ä½•å®šä½åŠ¨æ€å…ƒç´  æ·»åŠ æ˜¾å¼ç­‰å¾…\nWebDriverWait.until(expect_condition.presence_of_element_located((By.XPATH, \"//button[contains(text(), 'æäº¤')]\"))) ä½¿ç”¨ç›¸å¯¹ç¨³å®šçš„å…ƒç´ å±æ€§\n# é¿å… id = abc123 è¿™ç§åŠ¨æ€ç”Ÿæˆçš„ id driver.find_element(By.CSS_SELECTOR, \"div[class*='login-form']\") driver.find_element(By.XPATH, \"//input[@placeholder='ç”¨æˆ·å']\") ä½¿ç”¨ç›¸å¯¹å®šä½\n# æ‰¾åˆ° label åï¼Œå®šä½å®ƒå³è¾¹çš„è¾“å…¥æ¡† driver.find_element(By.XPATH, \"//label[text()='å¯†ç ']/following-sibling::input\") ä½¿ç”¨æ­£åˆ™åŒ¹é…\n# id=\"item_12345\" æ¯æ¬¡å˜åŒ–ï¼Œä½†å‰ç¼€å›ºå®š driver.find_element(By.XPATH, \"//*[contains(@id,'item_')]\") åŠ¨æ€ç­‰å¾… + å¾ªç¯æ£€æµ‹\nimport time for i in range(10): try: element = driver.find_element(By.XPATH, \"//div[@class='toast']\") print(\"æ‰¾åˆ°æç¤º:\", element.text) break except: time.sleep(1) ","wordCount":"539","inLanguage":"en","datePublished":"2025-09-02T06:57:02+08:00","dateModified":"2025-09-02T06:57:02+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://iuwu98005.github.io/posts/250902-python-base/"},"publisher":{"@type":"Organization","name":"My Blog","logo":{"@type":"ImageObject","url":"https://iuwu98005.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://iuwu98005.github.io/ accesskey=h title="My Blog (Alt + H)">My Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://iuwu98005.github.io/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://iuwu98005.github.io/projects/ title=Projects><span>Projects</span></a></li><li><a href=https://iuwu98005.github.io/about/ title=About><span>About</span></a></li><li><a href=https://iuwu98005.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://iuwu98005.github.io/>Home</a>&nbsp;Â»&nbsp;<a href=https://iuwu98005.github.io/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Python åŸºç¡€ï¼ˆ9.7æ›´æ–°ï¼‰</h1><div class=post-meta><span title='2025-09-02 06:57:02 +0800 +0800'>September 2, 2025</span>&nbsp;Â·&nbsp;3 min</div></header><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#python-builtin aria-label="Python builtin">Python builtin</a><ul><li><a href=#classmethod-%e5%92%8c-staticmethod aria-label="@classmethod å’Œ @staticmethod">@classmethod å’Œ @staticmethod</a><ul><li><a href=#staticmethod aria-label=@staticmethod>@staticmethod</a></li><li><a href=#classmethod aria-label=@classmethod>@classmethod</a></li><li><a href=#%e4%b8%a4%e8%80%85%e7%9a%84%e5%8c%ba%e5%88%ab aria-label=ä¸¤è€…çš„åŒºåˆ«>ä¸¤è€…çš„åŒºåˆ«</a></li></ul></li><li><a href=#python-%e7%ba%bf%e7%a8%8b%e6%b1%a0threadpoolexecutor aria-label="Python çº¿ç¨‹æ± (ThreadPoolExecutor)">Python çº¿ç¨‹æ± (ThreadPoolExecutor)</a><ul><li><a href=#threadpoolexecutor-%e4%b8%8e-thread-%e7%9a%84%e5%8c%ba%e5%88%ab aria-label="ThreadPoolExecutor ä¸ Thread çš„åŒºåˆ«">ThreadPoolExecutor ä¸ Thread çš„åŒºåˆ«</a></li><li><a href=#threadpoolexecutor-%e4%b8%8e-processpoolexecutor aria-label="ThreadPoolExecutor ä¸ ProcessPoolExecutor">ThreadPoolExecutor ä¸ ProcessPoolExecutor</a></li><li><a href=#%e5%9f%ba%e6%9c%ac%e7%94%a8%e6%b3%95 aria-label=åŸºæœ¬ç”¨æ³•>åŸºæœ¬ç”¨æ³•</a><ul><li><a href=#%e6%96%b0%e5%bb%ba%e7%ba%bf%e7%a8%8b%e6%b1%a0 aria-label=æ–°å»ºçº¿ç¨‹æ± >æ–°å»ºçº¿ç¨‹æ± </a></li><li><a href=#shutdown-%e7%9a%84%e7%94%a8%e6%b3%95 aria-label="shutdown çš„ç”¨æ³•">shutdown çš„ç”¨æ³•</a><ul><li><a href=#%e9%94%80%e6%af%81%e7%ba%bf%e7%a8%8b aria-label=é”€æ¯çº¿ç¨‹>é”€æ¯çº¿ç¨‹</a></li></ul></li><li><a href=#with-%e5%85%b3%e9%94%ae%e8%af%8d aria-label="with å…³é”®è¯">with å…³é”®è¯</a></li><li><a href=#%e8%8e%b7%e5%8f%96%e8%bf%94%e5%9b%9e%e5%80%bc aria-label=è·å–è¿”å›å€¼>è·å–è¿”å›å€¼</a></li><li><a href=#%e8%b6%85%e6%97%b6timeout aria-label=è¶…æ—¶(timeout)>è¶…æ—¶(timeout)</a></li><li><a href=#%e7%ad%89%e5%be%85wait aria-label=ç­‰å¾…(wait)>ç­‰å¾…(wait)</a></li></ul></li><li><a href=#shutdown-%e5%92%8c-wait-%e7%9a%84%e5%8c%ba%e5%88%ab aria-label="shutdown å’Œ wait çš„åŒºåˆ«">shutdown å’Œ wait çš„åŒºåˆ«</a><ul><li><a href=#-shutdownwaittrue-%e7%9a%84%e7%89%b9%e7%82%b9 aria-label="ğŸ”¹ shutdown(wait=True) çš„ç‰¹ç‚¹">ğŸ”¹ shutdown(wait=True) çš„ç‰¹ç‚¹</a></li><li><a href=#-wait-%e7%9a%84%e7%89%b9%e7%82%b9 aria-label="ğŸ”¹ wait() çš„ç‰¹ç‚¹">ğŸ”¹ wait() çš„ç‰¹ç‚¹</a></li></ul></li></ul></li></ul></li><li><a href=#%e6%95%b0%e6%8d%ae%e7%bb%93%e6%9e%84%e4%b8%8e%e7%ae%97%e6%b3%95 aria-label=æ•°æ®ç»“æ„ä¸ç®—æ³•>æ•°æ®ç»“æ„ä¸ç®—æ³•</a><ul><li><a href=#%e6%95%b0%e7%bb%84%e5%8e%bb%e9%87%8d aria-label=æ•°ç»„å»é‡>æ•°ç»„å»é‡</a></li></ul></li><li><a href=#%e5%b8%b8%e8%a7%81%e7%ac%ac%e4%b8%89%e6%96%b9%e5%ba%93 aria-label=å¸¸è§ç¬¬ä¸‰æ–¹åº“>å¸¸è§ç¬¬ä¸‰æ–¹åº“</a><ul><li><a href=#selenium aria-label=Selenium>Selenium</a><ul><li><a href=#%e5%9f%ba%e6%9c%ac%e4%bd%bf%e7%94%a8 aria-label=åŸºæœ¬ä½¿ç”¨>åŸºæœ¬ä½¿ç”¨</a></li><li><a href=#selenium-%e5%a6%82%e4%bd%95%e5%ae%9a%e4%bd%8d%e5%8a%a8%e6%80%81%e5%85%83%e7%b4%a0 aria-label="Selenium å¦‚ä½•å®šä½åŠ¨æ€å…ƒç´ ">Selenium å¦‚ä½•å®šä½åŠ¨æ€å…ƒç´ </a></li></ul></li></ul></li></ul></div></details></div><div class=post-content><h2 id=python-builtin>Python builtin<a hidden class=anchor aria-hidden=true href=#python-builtin>#</a></h2><h3 id=classmethod-å’Œ-staticmethod><code>@classmethod</code> å’Œ <code>@staticmethod</code><a hidden class=anchor aria-hidden=true href=#classmethod-å’Œ-staticmethod>#</a></h3><p><code>@classmethod</code> å’Œ <code>@staticmethod</code> æ˜¯ Python è‡ªå¸¦(builtin) çš„ä¸¤ä¸ªè£…é¥°å™¨</p><p>classmethod å’Œ staticmethod éƒ½å¯ä»¥é€šè¿‡ object è°ƒç”¨å’Œ class è°ƒç”¨ï¼Œ ä¹Ÿå°±æ˜¯:</p><ol><li>é€šè¿‡å¯¹è±¡è°ƒç”¨ï¼Œ<code>A().f(1)</code></li><li>é€šè¿‡ç±»è°ƒç”¨ï¼Œ<code>A.f(1)</code></li></ol><h4 id=staticmethod><code>@staticmethod</code><a hidden class=anchor aria-hidden=true href=#staticmethod>#</a></h4><p><code>staticmethod</code> å°±æ˜¯æ™®é€šå‡½æ•°æ”¾åˆ° Class çš„å‘½åç©ºé—´ä¸‹ï¼Œä½†ä¸ç”¨ä¼ å…¥ <code>self</code> å‚æ•°ã€‚</p><ol><li>æä¾›æ›´å¥½çš„å°è£…ï¼Œå°†åŠŸèƒ½ç»‘å®šåœ¨ç±»ä¸Šï¼Œè€Œä¸æ˜¯ä»…ä»…æ˜¯åœ¨ç±»çš„å¯¹è±¡ä¸Šã€‚</li></ol><h4 id=classmethod><code>@classmethod</code><a hidden class=anchor aria-hidden=true href=#classmethod>#</a></h4><p>å¯¹æ¯”æ™®é€šç±»ä¸­çš„æ–¹æ³•ï¼Œ<code>classmethod</code> çš„ç¬¬ä¸€ä¸ª arg ä¸º <code>cls</code>ï¼Œè€Œä¸æ˜¯ <code>self</code>ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Person1</span>:
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>...</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@staticmethod</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>create</span>(name, birth_year):
</span></span><span style=display:flex><span>        curr_year <span style=color:#f92672>=</span> datatime<span style=color:#f92672>.</span>now()<span style=color:#f92672>.</span>year
</span></span><span style=display:flex><span>        age <span style=color:#f92672>=</span> curr_year <span style=color:#f92672>-</span> birth_year
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> Person1(name, age)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Person2</span>:
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>...</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@classmethod</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>create</span>(cls, name, birth_year):
</span></span><span style=display:flex><span>        curr_year <span style=color:#f92672>=</span> datatime<span style=color:#f92672>.</span>now()<span style=color:#f92672>.</span>year
</span></span><span style=display:flex><span>        age <span style=color:#f92672>=</span> curr_year <span style=color:#f92672>-</span> birth_year
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> cls(name, age)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Child1</span>(Person1):
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>__init__</span>(self, name, age, department):
</span></span><span style=display:flex><span>        super()<span style=color:#f92672>.</span><span style=color:#a6e22e>__init__</span>(name, age)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Child2</span>(Person2):
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>__init__</span>(self, name, age, department):
</span></span><span style=display:flex><span>        super()<span style=color:#f92672>.</span><span style=color:#a6e22e>__init__</span>(name, age)
</span></span></code></pre></div><p>ä»¥ä¸Šä¸¤æ®µä»£ç çš„åŠŸèƒ½åŸºæœ¬ç›¸åŒï¼Œç¬¬äºŒæ®µä»£ç ä¸­çš„ <code>cls</code> å¯ä»¥ä»£è¡¨ <code>Person2</code> è‡ªå·±ã€‚</p><h4 id=ä¸¤è€…çš„åŒºåˆ«>ä¸¤è€…çš„åŒºåˆ«<a hidden class=anchor aria-hidden=true href=#ä¸¤è€…çš„åŒºåˆ«>#</a></h4><ol><li>è¢« <code>@classmethod</code> ä¿®é¥°çš„æ–¹æ³•ï¼Œè¿”å› <code>cls</code> å¯¹è±¡ï¼Œå­ç±»åœ¨è°ƒç”¨æ—¶ï¼Œè¿”å›çš„æ˜¯å­ç±»è‡ªèº«ï¼ˆä¾‹å­ä¸­ä¸º <code>Child2</code>ï¼‰ï¼›è€Œ <code>@staticmethod</code> ä¿®é¥°çš„æ–¹æ³•ï¼Œå­ç±»åœ¨è°ƒç”¨æ—¶ï¼Œè¿”å›çš„å°±æ˜¯é™æ€çš„ç±»å‹ï¼ˆä¾‹å­ä¸­ä¸º <code>Person1</code>ï¼‰</li></ol><h3 id=python-çº¿ç¨‹æ± threadpoolexecutor>Python çº¿ç¨‹æ± (ThreadPoolExecutor)<a hidden class=anchor aria-hidden=true href=#python-çº¿ç¨‹æ± threadpoolexecutor>#</a></h3><h4 id=threadpoolexecutor-ä¸-thread-çš„åŒºåˆ«>ThreadPoolExecutor ä¸ Thread çš„åŒºåˆ«<a hidden class=anchor aria-hidden=true href=#threadpoolexecutor-ä¸-thread-çš„åŒºåˆ«>#</a></h4><ol><li>Thread åœ¨å¼€å§‹çº¿ç¨‹å’Œç»“æŸçº¿ç¨‹æ—¶ï¼Œä¼šåˆ›å»ºå’Œé”€æ¯çº¿ç¨‹ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¼šè€—è´¹å¤§é‡çš„æ—¶é—´ï¼›ThreadPool åˆ™çœå»äº†è¿™ä¸¤ä¸ªæ­¥éª¤ï¼Œç›´æ¥ä½¿ç”¨åŸæ¥çš„çº¿ç¨‹ã€‚</li></ol><h4 id=threadpoolexecutor-ä¸-processpoolexecutor>ThreadPoolExecutor ä¸ ProcessPoolExecutor<a hidden class=anchor aria-hidden=true href=#threadpoolexecutor-ä¸-processpoolexecutor>#</a></h4><p>ThreadPoolExecutor é€‚åˆå¤„ç† I/0 å¯†é›†å‹æ“ä½œï¼ŒProcessPoolExecutor é€‚åˆå¤„ç† CPU å¯†é›†å‹æ“ä½œï¼ˆéœ€è¦å¤§é‡è®¡ç®—ï¼‰</p><h4 id=åŸºæœ¬ç”¨æ³•>åŸºæœ¬ç”¨æ³•<a hidden class=anchor aria-hidden=true href=#åŸºæœ¬ç”¨æ³•>#</a></h4><p>ThreadPoolExecutor ä¸º Python å®˜æ–¹å°è£…çš„ Threading åº“ï¼Œé€šè¿‡ <code>from concurrent.futures import ThreadPoolExecutor</code> å¯¼å…¥ã€‚</p><h5 id=æ–°å»ºçº¿ç¨‹æ± >æ–°å»ºçº¿ç¨‹æ± <a hidden class=anchor aria-hidden=true href=#æ–°å»ºçº¿ç¨‹æ± >#</a></h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-Python data-lang=Python><span style=display:flex><span><span style=color:#f92672>from</span> concurrent.futures <span style=color:#f92672>import</span> ThreadPoolExecutor
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> time
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>waste_time</span>(n: int) <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>None</span>:
</span></span><span style=display:flex><span>    print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>{</span>n<span style=color:#e6db74>}</span><span style=color:#e6db74> started...&#34;</span>)
</span></span><span style=display:flex><span>    time<span style=color:#f92672>.</span>sleep(n)
</span></span><span style=display:flex><span>    print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>{</span>n<span style=color:#e6db74>}</span><span style=color:#e6db74> ended...&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>t <span style=color:#f92672>=</span> ThreadPoolExecutor(max_workers<span style=color:#f92672>=</span><span style=color:#ae81ff>10</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> i <span style=color:#f92672>in</span> range(<span style=color:#ae81ff>10</span>):
</span></span><span style=display:flex><span>    t<span style=color:#f92672>.</span>submit(waste_time, i)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>print(<span style=color:#e6db74>&#34;end&#34;</span>)
</span></span></code></pre></div><blockquote><ul><li>max_workers: å…è®¸æœ€å¤šæœ‰å‡ ä¸ªçº¿ç¨‹è¿è¡Œï¼Œé»˜è®¤ä¸º cpu æœ€å¤§è¿è¡Œæ ¸å¿ƒæ•°*5ï¼ˆe.g. 8æ ¸cpuï¼Œæ­¤æ—¶ max_workers é»˜è®¤ä¸º 40ï¼‰</li><li>submit(func, args): args ä¸º func çš„å‚æ•°</li></ul></blockquote><p>è¿™æ®µä»£ç å¯èƒ½å…ˆæ‰“å° endï¼Œä¹‹åå†æ‰“å° &ldquo;{n} started&rdquo; å’Œ &ldquo;{n} ended&rdquo;ï¼Œè¿™æ˜¯å› ä¸ºç¨‹åºæ˜¯éé˜»å¡çš„ã€‚ç¨‹åºè¿è¡Œåˆ° t.submit æ—¶ï¼Œç¨‹åºç»§ç»­è¿è¡Œ t.submit çš„é€»è¾‘ï¼Œå‰©ä½™çš„ä»£ç åˆ™äº¤ç»™äº†å¦ä¸€ä¸ªçº¿ç¨‹ç»§ç»­æ‰§è¡Œã€‚</p><h5 id=shutdown-çš„ç”¨æ³•>shutdown çš„ç”¨æ³•<a hidden class=anchor aria-hidden=true href=#shutdown-çš„ç”¨æ³•>#</a></h5><p>ç”±äºçº¿ç¨‹æ± æ˜¯éé˜»å¡çš„ï¼Œå¦‚æœè¦æ§åˆ¶çº¿ç¨‹çš„æ‰§è¡Œé¡ºåºï¼Œå¯ä»¥ä½¿ç”¨ <code>shutdown()</code> æ¥æ§åˆ¶çº¿ç¨‹çš„é˜»å¡ã€‚</p><p>æ¯”å¦‚åœ¨ä¸Šè¿°ä»£ç  print(&ldquo;end&rdquo;) ä¸Šé¢ä¸€è¡ŒåŠ å…¥ <code>t.shutdown()</code>ï¼Œæ­¤æ—¶ end å°±ä¼šç­‰å¾…æ‰€æœ‰çº¿ç¨‹éƒ½æ‰§è¡Œå®Œæˆåæ‰è¿›è¡Œæ‰“å°ã€‚</p><h6 id=é”€æ¯çº¿ç¨‹>é”€æ¯çº¿ç¨‹<a hidden class=anchor aria-hidden=true href=#é”€æ¯çº¿ç¨‹>#</a></h6><p>å¯ä»¥å°† shutdown æ–¹æ³•çš„å‚æ•° <code>cancel_future</code> è®¾ç½®ä¸º Trueï¼Œæ¥è¿›è¡Œçº¿ç¨‹çš„é”€æ¯ã€‚</p><h5 id=with-å…³é”®è¯>with å…³é”®è¯<a hidden class=anchor aria-hidden=true href=#with-å…³é”®è¯>#</a></h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-Python data-lang=Python><span style=display:flex><span><span style=color:#66d9ef>with</span> ThreadPoolExecutor(max_workers<span style=color:#f92672>=</span><span style=color:#ae81ff>10</span>) <span style=color:#66d9ef>as</span> t:
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> i <span style=color:#f92672>in</span> range(<span style=color:#ae81ff>10</span>):
</span></span><span style=display:flex><span>        t<span style=color:#f92672>.</span>submit(waste_time, i)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>other code<span style=color:#f92672>...</span>
</span></span></code></pre></div><p>ä½¿ç”¨ with å…³é”®è¯æœ‰ä»¥ä¸‹ä¸¤ä¸ªä½œç”¨ï¼š</p><ol><li>çº¿ç¨‹è¿è¡Œç»“æŸåï¼Œé”€æ¯çº¿ç¨‹</li><li>é˜»å¡ç¨‹åºï¼Œç­‰å¾…æ‰€æœ‰çº¿ç¨‹æ‰§è¡Œå®Œæˆåï¼Œæ‰è¿è¡Œä¸‹é¢çš„ä»£ç </li></ol><h5 id=è·å–è¿”å›å€¼>è·å–è¿”å›å€¼<a hidden class=anchor aria-hidden=true href=#è·å–è¿”å›å€¼>#</a></h5><p>é€šè¿‡æ–°å»ºåˆ—è¡¨ threadsï¼Œå¹¶å°†çº¿ç¨‹æ·»åŠ åˆ°åˆ—è¡¨ä¸­ï¼Œè°ƒç”¨åˆ—è¡¨ä¸­å…ƒç´ çš„ <code>result()</code> æ–¹æ³•å°±å¯ä»¥è·å–åˆ°æ–¹æ³•çš„è¿”å›å€¼ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-Python data-lang=Python><span style=display:flex><span><span style=color:#f92672>from</span> concurrent.futures <span style=color:#f92672>import</span> ThreadPoolExecutor, as_completed
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> time
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>waste_time</span>(n: int) <span style=color:#f92672>-&gt;</span> int:
</span></span><span style=display:flex><span>    print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>{</span>n<span style=color:#e6db74>}</span><span style=color:#e6db74> started...&#34;</span>)
</span></span><span style=display:flex><span>    time<span style=color:#f92672>.</span>sleep(n)
</span></span><span style=display:flex><span>    print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>{</span>n<span style=color:#e6db74>}</span><span style=color:#e6db74> ended...&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> n
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>threads <span style=color:#f92672>=</span> []
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>with</span> ThreadPoolExecutor(max_workers<span style=color:#f92672>=</span><span style=color:#ae81ff>10</span>) <span style=color:#66d9ef>as</span> t:
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> i <span style=color:#f92672>in</span> range(<span style=color:#ae81ff>10</span>):
</span></span><span style=display:flex><span>    <span style=color:#75715e># t.submit(waste_time, i)</span>
</span></span><span style=display:flex><span>        threads<span style=color:#f92672>.</span>append(t<span style=color:#f92672>.</span>submit(waste_time, i))
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> thread <span style=color:#f92672>in</span> as_completed(threads):
</span></span><span style=display:flex><span>        <span style=color:#75715e># æ‰“å°ç»“æœ</span>
</span></span><span style=display:flex><span>        print(thread<span style=color:#f92672>.</span>result())
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>print(<span style=color:#e6db74>&#34;end&#34;</span>)
</span></span></code></pre></div><blockquote><p>ä»»ä½•åœ¨ <code>as_completed()</code> è¢«è°ƒç”¨ä¹‹å‰å®Œæˆçš„ future å¯¹è±¡å°†ä¼šä¼˜å…ˆè¢«ç”Ÿæˆã€‚è¿™æ®µä»£ç ä¸­ä¼šä¼˜å…ˆæ‰“å°å·²ç»è¿è¡Œç»“æŸçš„çº¿ç¨‹çš„ç»“æœï¼ˆå¯èƒ½ä¸æ˜¯æŒ‰ç…§1-10çš„é¡ºåºæ‰“å°ï¼‰ã€‚</p></blockquote><h5 id=è¶…æ—¶timeout>è¶…æ—¶(timeout)<a hidden class=anchor aria-hidden=true href=#è¶…æ—¶timeout>#</a></h5><p>é€šè¿‡ <code>timeout</code> å‚æ•°è®¾ç½®è¶…æ—¶ï¼Œçœå»æ‰‹åŠ¨ <code>try-catch</code> çš„è¿‡ç¨‹</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-Python data-lang=Python><span style=display:flex><span><span style=color:#66d9ef>with</span> ThreadPoolExecutor(max_workers<span style=color:#f92672>=</span><span style=color:#ae81ff>10</span>) <span style=color:#66d9ef>as</span> t:
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> i <span style=color:#f92672>in</span> range(<span style=color:#ae81ff>10</span>):
</span></span><span style=display:flex><span>    <span style=color:#75715e># t.submit(waste_time, i)</span>
</span></span><span style=display:flex><span>        threads<span style=color:#f92672>.</span>append(t<span style=color:#f92672>.</span>submit(waste_time, i))
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> thread <span style=color:#f92672>in</span> as_completed(threads, timeout<span style=color:#f92672>=</span><span style=color:#ae81ff>5</span>):
</span></span><span style=display:flex><span>        <span style=color:#75715e># æ‰“å°ç»“æœ</span>
</span></span><span style=display:flex><span>        print(thread<span style=color:#f92672>.</span>result(timeout<span style=color:#f92672>=</span><span style=color:#ae81ff>5</span>))
</span></span></code></pre></div><h5 id=ç­‰å¾…wait>ç­‰å¾…(wait)<a hidden class=anchor aria-hidden=true href=#ç­‰å¾…wait>#</a></h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-Python data-lang=Python><span style=display:flex><span><span style=color:#f92672>from</span> concurrent.futures <span style=color:#f92672>import</span> ThreadPoolExecutor, as_completed, wait, ALL_COMPLETED, FIRST_COMPLETED
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> time
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>waste_time</span>(n: int) <span style=color:#f92672>-&gt;</span> int:
</span></span><span style=display:flex><span>    print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>{</span>n<span style=color:#e6db74>}</span><span style=color:#e6db74> started...&#34;</span>)
</span></span><span style=display:flex><span>    time<span style=color:#f92672>.</span>sleep(n)
</span></span><span style=display:flex><span>    print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>{</span>n<span style=color:#e6db74>}</span><span style=color:#e6db74> ended...&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> n
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>threads <span style=color:#f92672>=</span> []
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>t <span style=color:#f92672>=</span> ThreadPoolExecutor(max_workers<span style=color:#f92672>=</span><span style=color:#ae81ff>10</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> i <span style=color:#f92672>in</span> range(<span style=color:#ae81ff>10</span>):
</span></span><span style=display:flex><span>    threads<span style=color:#f92672>.</span>append(t<span style=color:#f92672>.</span>submit(waste_time, i))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># å½“æ‰€æœ‰çº¿ç¨‹è¿è¡Œå®Œæ¯•åï¼Œæ‰è¿›è¡Œè¿”å›</span>
</span></span><span style=display:flex><span>wait(threads, timeout<span style=color:#f92672>=</span><span style=color:#ae81ff>10</span>, return_when<span style=color:#f92672>=</span>ALL_COMPLETED)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>print(<span style=color:#e6db74>&#34;end&#34;</span>)
</span></span></code></pre></div><blockquote><p>ALL_COMPLETED: ç­‰å¾…æ‰€æœ‰çº¿ç¨‹æ‰§è¡Œå®Œæ¯•åï¼Œè¿è¡Œä¸‹ä¸€è¡Œä»£ç 
FIRST_COMPLETED: ç¬¬ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œå®Œæ¯•åï¼Œè¿è¡Œä¸‹ä¸€è¡Œä»£ç </p></blockquote><p>è¿™æ®µä»£ç é™¤äº† print æ‰“å°çš„å†…å®¹ï¼Œè¿˜æ‰“å°äº† <code>DoneAndNotDoneFutures</code> å¯¹è±¡ï¼ˆåŒ…æ‹¬å·²ç»å®Œæˆçš„çº¿ç¨‹(done)å’Œæœªå®Œæˆçš„çº¿ç¨‹(not_done)ï¼‰</p><p>è¿™ä¸ªç‰¹æ€§é€‚åˆåšæŠ¢ç¥¨çš„åŠŸèƒ½ï¼Œå³ç¬¬ä¸€ä¸ªäººæŠ¢åˆ°ç¥¨åï¼Œç›´æ¥ç»“æŸåé¢çš„çº¿ç¨‹ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-Python data-lang=Python><span style=display:flex><span><span style=color:#f92672>from</span> concurrent.futures <span style=color:#f92672>import</span> ThreadPoolExecutor, as_completed, wait, ALL_COMPLETED, FIRST_COMPLETED
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> time
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>waste_time</span>(n: int) <span style=color:#f92672>-&gt;</span> int:
</span></span><span style=display:flex><span>    print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>{</span>n<span style=color:#e6db74>}</span><span style=color:#e6db74> started...&#34;</span>)
</span></span><span style=display:flex><span>    time<span style=color:#f92672>.</span>sleep(n)
</span></span><span style=display:flex><span>    print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>{</span>n<span style=color:#e6db74>}</span><span style=color:#e6db74> ended...&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> n
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>threads <span style=color:#f92672>=</span> []
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>t <span style=color:#f92672>=</span> ThreadPoolExecutor(max_workers<span style=color:#f92672>=</span><span style=color:#ae81ff>10</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> i <span style=color:#f92672>in</span> range(<span style=color:#ae81ff>10</span>):
</span></span><span style=display:flex><span>    threads<span style=color:#f92672>.</span>append(t<span style=color:#f92672>.</span>submit(waste_time, i))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>wait(threads, timeout<span style=color:#f92672>=</span><span style=color:#ae81ff>10</span>, return_when<span style=color:#f92672>=</span>FIRST_COMPLETED)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>t<span style=color:#f92672>.</span>shutdown()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>print(<span style=color:#e6db74>&#34;end&#34;</span>)
</span></span></code></pre></div><h4 id=shutdown-å’Œ-wait-çš„åŒºåˆ«><code>shutdown</code> å’Œ <code>wait</code> çš„åŒºåˆ«<a hidden class=anchor aria-hidden=true href=#shutdown-å’Œ-wait-çš„åŒºåˆ«>#</a></h4><ol><li><p><code>shutdown(wait=True)</code></p><p>ä½œç”¨ï¼šå‘Šè¯‰çº¿ç¨‹æ± â€œä¸å†æ¥å—æ–°çš„ä»»åŠ¡â€ï¼Œç„¶åæ ¹æ® wait å‚æ•°å†³å®šæ˜¯å¦é˜»å¡ã€‚</p><ul><li><p><code>shutdown(wait=True)</code>ï¼ˆé»˜è®¤å€¼ï¼‰ï¼š
ä¼šé˜»å¡ï¼Œç›´åˆ°å·²ç»æäº¤çš„ä»»åŠ¡éƒ½æ‰§è¡Œå®Œæ¯•ï¼Œçº¿ç¨‹æ± ä¸­çš„å·¥ä½œçº¿ç¨‹é€€å‡ºï¼Œå†ç»§ç»­æ‰§è¡Œåç»­ä»£ç ã€‚</p></li><li><p><code>shutdown(wait=False)</code>ï¼š
ä¸é˜»å¡ï¼Œç›´æ¥è¿”å›ã€‚çº¿ç¨‹æ± ä¼šåœ¨åå°ç»§ç»­è·‘å·²æäº¤çš„ä»»åŠ¡ï¼Œä½†ä¸»çº¿ç¨‹ä¸ä¼šç­‰å®ƒã€‚</p></li></ul><blockquote><p>! <code>shutdown()</code>ä¸€æ—¦è°ƒç”¨ï¼Œçº¿ç¨‹æ± å°±ä¸èƒ½å† submit() æ–°ä»»åŠ¡äº†ã€‚</p></blockquote></li><li><p><code>concurrent.futures.wait(fs, return_when=ALL_COMPLETED)</code></p><p>ä½œç”¨ï¼šç­‰å¾…ä¸€ç»„ Future å¯¹è±¡ å®Œæˆï¼Œä¸ä¼šå…³é—­çº¿ç¨‹æ± ã€‚</p><p>ç”¨äºä½ æ‰‹é‡Œæœ‰ä¸€æ‰¹ <code>future = executor.submit(func, ...)</code> å¾—åˆ°çš„ Futureï¼Œç„¶å <code>wait(futures)</code> å°±ä¼šé˜»å¡ç›´åˆ°å®ƒä»¬å®Œæˆã€‚</p><p><code>wait()</code> åªå…³å¿ƒè¿™äº› ä»»åŠ¡ï¼Œè·Ÿçº¿ç¨‹æ± çš„ç”Ÿå‘½å‘¨æœŸæ— å…³ï¼›æ± å­æœ¬èº«è¿˜èƒ½ç»§ç»­æ¥å—æ–°ä»»åŠ¡ã€‚</p></li></ol><h5 id=-shutdownwaittrue-çš„ç‰¹ç‚¹>ğŸ”¹ <code>shutdown(wait=True)</code> çš„ç‰¹ç‚¹<a hidden class=anchor aria-hidden=true href=#-shutdownwaittrue-çš„ç‰¹ç‚¹>#</a></h5><ul><li><p>å…³é—­çº¿ç¨‹æ± ï¼Œçº¿ç¨‹èµ„æºé‡Šæ”¾ï¼Œä¸èƒ½å†æäº¤ä»»åŠ¡ã€‚</p></li><li><p>å¦‚æœä½ æœ‰å¤šç»„ä»»åŠ¡ï¼Œæ¯æ¬¡éƒ½ <code>shutdown</code> â†’ æ–°å»º <code>ThreadPoolExecutor</code>ï¼Œä¼šé¢‘ç¹åˆ›å»º/é”€æ¯çº¿ç¨‹ï¼Œå¸¦æ¥æ€§èƒ½å¼€é”€ã€‚</p></li><li><p>æ›´é€‚åˆâ€œæ•´ä¸ªä»»åŠ¡æµéƒ½ç»“æŸâ€æ—¶è°ƒç”¨ã€‚</p></li></ul><h5 id=-wait-çš„ç‰¹ç‚¹>ğŸ”¹ <code>wait()</code> çš„ç‰¹ç‚¹<a hidden class=anchor aria-hidden=true href=#-wait-çš„ç‰¹ç‚¹>#</a></h5><ul><li><p>åªç­‰å¾…ä¸€ç»„ä»»åŠ¡å®Œæˆï¼Œçº¿ç¨‹æ± æœ¬èº«è¿˜æ´»ç€ï¼Œå¯ä»¥ç»§ç»­æäº¤ã€‚</p></li><li><p>é¿å…äº†åå¤åˆ›å»ºå’Œé”€æ¯çº¿ç¨‹æ± çš„æˆæœ¬ï¼Œçº¿ç¨‹å¯å¤ç”¨ã€‚</p></li></ul><h2 id=æ•°æ®ç»“æ„ä¸ç®—æ³•>æ•°æ®ç»“æ„ä¸ç®—æ³•<a hidden class=anchor aria-hidden=true href=#æ•°æ®ç»“æ„ä¸ç®—æ³•>#</a></h2><h3 id=æ•°ç»„å»é‡>æ•°ç»„å»é‡<a hidden class=anchor aria-hidden=true href=#æ•°ç»„å»é‡>#</a></h3><ol><li><p>ä½¿ç”¨ <code>set()</code>, é¡ºåºå¯èƒ½ä¼šè¢«æ‰“ä¹±</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-Python data-lang=Python><span style=display:flex><span>arr <span style=color:#f92672>=</span> [<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>3</span>, <span style=color:#ae81ff>4</span>, <span style=color:#ae81ff>5</span>, <span style=color:#ae81ff>5</span>]
</span></span><span style=display:flex><span>res <span style=color:#f92672>=</span> list(set(arr))
</span></span><span style=display:flex><span>print(res)
</span></span></code></pre></div></li><li><p>ä½¿ç”¨ <code>dict()</code>, å¯ä»¥ä¿æŒåŸæ¥çš„é¡ºåº</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-Python data-lang=Python><span style=display:flex><span>    arr <span style=color:#f92672>=</span> [<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>3</span>, <span style=color:#ae81ff>4</span>, <span style=color:#ae81ff>5</span>, <span style=color:#ae81ff>5</span>]
</span></span><span style=display:flex><span>    res <span style=color:#f92672>=</span> list(dict<span style=color:#f92672>.</span>fromkeys(arr))
</span></span><span style=display:flex><span>    print(res)
</span></span></code></pre></div></li></ol><h2 id=å¸¸è§ç¬¬ä¸‰æ–¹åº“>å¸¸è§ç¬¬ä¸‰æ–¹åº“<a hidden class=anchor aria-hidden=true href=#å¸¸è§ç¬¬ä¸‰æ–¹åº“>#</a></h2><h3 id=selenium>Selenium<a hidden class=anchor aria-hidden=true href=#selenium>#</a></h3><h4 id=åŸºæœ¬ä½¿ç”¨>åŸºæœ¬ä½¿ç”¨<a hidden class=anchor aria-hidden=true href=#åŸºæœ¬ä½¿ç”¨>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-Python data-lang=Python><span style=display:flex><span><span style=color:#f92672>from</span> selenium <span style=color:#f92672>import</span> webdriver
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>driver<span style=color:#f92672>.</span>webdriver<span style=color:#f92672>.</span>Chrome()
</span></span><span style=display:flex><span>driver<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#34;www.baidu.com&#34;</span>)
</span></span><span style=display:flex><span>driver<span style=color:#f92672>.</span>quit()
</span></span></code></pre></div><h4 id=selenium-å¦‚ä½•å®šä½åŠ¨æ€å…ƒç´ >Selenium å¦‚ä½•å®šä½åŠ¨æ€å…ƒç´ <a hidden class=anchor aria-hidden=true href=#selenium-å¦‚ä½•å®šä½åŠ¨æ€å…ƒç´ >#</a></h4><ol><li><p>æ·»åŠ æ˜¾å¼ç­‰å¾…</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-Python data-lang=Python><span style=display:flex><span>    WebDriverWait<span style=color:#f92672>.</span>until(expect_condition<span style=color:#f92672>.</span>presence_of_element_located((By<span style=color:#f92672>.</span>XPATH, <span style=color:#e6db74>&#34;//button[contains(text(), &#39;æäº¤&#39;)]&#34;</span>)))
</span></span></code></pre></div></li><li><p>ä½¿ç”¨ç›¸å¯¹ç¨³å®šçš„å…ƒç´ å±æ€§</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-Python data-lang=Python><span style=display:flex><span><span style=color:#75715e># é¿å… id = abc123 è¿™ç§åŠ¨æ€ç”Ÿæˆçš„ id</span>
</span></span><span style=display:flex><span>driver<span style=color:#f92672>.</span>find_element(By<span style=color:#f92672>.</span>CSS_SELECTOR, <span style=color:#e6db74>&#34;div[class*=&#39;login-form&#39;]&#34;</span>)
</span></span><span style=display:flex><span>driver<span style=color:#f92672>.</span>find_element(By<span style=color:#f92672>.</span>XPATH, <span style=color:#e6db74>&#34;//input[@placeholder=&#39;ç”¨æˆ·å&#39;]&#34;</span>)
</span></span></code></pre></div></li><li><p>ä½¿ç”¨ç›¸å¯¹å®šä½</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-Python data-lang=Python><span style=display:flex><span><span style=color:#75715e># æ‰¾åˆ° label åï¼Œå®šä½å®ƒå³è¾¹çš„è¾“å…¥æ¡†</span>
</span></span><span style=display:flex><span>driver<span style=color:#f92672>.</span>find_element(By<span style=color:#f92672>.</span>XPATH, <span style=color:#e6db74>&#34;//label[text()=&#39;å¯†ç &#39;]/following-sibling::input&#34;</span>)
</span></span></code></pre></div></li><li><p>ä½¿ç”¨æ­£åˆ™åŒ¹é…</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-Python data-lang=Python><span style=display:flex><span><span style=color:#75715e># id=&#34;item_12345&#34; æ¯æ¬¡å˜åŒ–ï¼Œä½†å‰ç¼€å›ºå®š</span>
</span></span><span style=display:flex><span>driver<span style=color:#f92672>.</span>find_element(By<span style=color:#f92672>.</span>XPATH, <span style=color:#e6db74>&#34;//*[contains(@id,&#39;item_&#39;)]&#34;</span>)
</span></span></code></pre></div></li><li><p>åŠ¨æ€ç­‰å¾… + å¾ªç¯æ£€æµ‹</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-Python data-lang=Python><span style=display:flex><span><span style=color:#f92672>import</span> time
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> i <span style=color:#f92672>in</span> range(<span style=color:#ae81ff>10</span>):
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>try</span>:
</span></span><span style=display:flex><span>        element <span style=color:#f92672>=</span> driver<span style=color:#f92672>.</span>find_element(By<span style=color:#f92672>.</span>XPATH, <span style=color:#e6db74>&#34;//div[@class=&#39;toast&#39;]&#34;</span>)
</span></span><span style=display:flex><span>        print(<span style=color:#e6db74>&#34;æ‰¾åˆ°æç¤º:&#34;</span>, element<span style=color:#f92672>.</span>text)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>break</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>except</span>:
</span></span><span style=display:flex><span>        time<span style=color:#f92672>.</span>sleep(<span style=color:#ae81ff>1</span>)
</span></span></code></pre></div></li></ol></div><footer class=post-footer><ul class=post-tags></ul><nav class=paginav><a class=prev href=https://iuwu98005.github.io/posts/250903-jenkins/><span class=title>Â« Prev</span><br><span>Jenkins å­¦ä¹ è®°å½•</span>
</a><a class=next href=https://iuwu98005.github.io/posts/250815-django/><span class=title>Next Â»</span><br><span>Django å­¦ä¹ è®°å½•</span></a></nav></footer></article></main><footer class=footer><span>Â© 2025 IUWU98005</span> Â·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>